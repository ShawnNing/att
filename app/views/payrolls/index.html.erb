<h1>Listing payrolls</h1>

<div ng-app="PayrollApp">
  <div ng-controller="PayrollCtrl" ng-init="initDates('<%=@start_date%>', '<%=@end_date%>');">
    <form class="form-inline" role="form">
      <div class="form-group">
        <label>Start Date</label>
        <input class="form-control" type="text" required="required" datepicker-options="dateOptions" datepicker-popup="yyyy-MM-dd" ng-model="start_date" ng-required="true" />
      </div>
      <div class="form-group">
        <label>End Date</label>
        <input class="form-control" type="text" required="required" datepicker-options="dateOptions" datepicker-popup="yyyy-MM-dd" ng-model="end_date" ng-required="true" />
      </div>
      <br/>
      <pre>Create payroll from <em>{{start_date | date:'fullDate' }}</em> to <em>{{end_date | date:'fullDate' }}</em></pre>
      <button class="btn btn-primary" ng-click="createPayroll('s');">Create</button>

      <table class="table table-striped table-bordered table-condensed" ng-init="initPayrolls();">
        <tr>
          <th>Date</th>
          <th>Action</th>
        </tr>
        <tr ng-repeat="payroll in payrolls | orderBy:predicate" ng-class="employee.class_name()">
           <td><a href="/payrolls/{{payroll.id}}">{{payroll.start_date}} <span class="glyphicon glyphicon-chevron-right"> </span> {{payroll.end_date}}</a></td>
           <td><button class="btn btn-primary" ng-click="deletePayroll(payroll.id);">Delete</button></td>
        </tr>
      </table>
      
    </form>
  </div>
</div>
