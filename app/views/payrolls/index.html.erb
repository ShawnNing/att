<h1>Listing payrolls</h1>

<div ng-app="PayrollApp">
  <div ng-controller="PayrollCtrl" ng-init="initDates('<%=@start_date%>', '<%=@end_date%>');">
    <form class="form-inline" role="form">
      <div class="form-group">
        <label>Start Date</label>
        <input class="form-control" type="text" required="required" datepicker-options="dateOptions" datepicker-popup="yyyy-MM-dd" ng-model="start_date" ng-required="true" />
      </div>
      <div class="form-group">
        <label>End Date</label>
        <input class="form-control" type="text" required="required" datepicker-options="dateOptions" datepicker-popup="yyyy-MM-dd" ng-model="end_date" ng-required="true" />
      </div>
      <br/>
      <pre>Create payroll from <em>{{start_date | date:'fullDate' }}</em> to <em>{{end_date | date:'fullDate' }}</em></pre>
      <button class="btn btn-primary" ng-click="createPayroll('s');">Create</button>
    </form>
    
    <table class="table table-striped table-bordered table-condensed">
      <tr>
        <th><button ng-click="sortBy('num');">Start Date</button></th>
        <th><button ng-click="sortBy('sin');">End Date</button></th>
      </tr>
      <tr ng-repeat="payroll in payrolls | orderBy:predicate" ng-class="employee.class_name()">
        <td>{{payroll.start_date}}</td>
        <td>{{payroll.end_date}}</td>
      </tr>
    </table>

  </div>
</div>

<table>
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @payrolls.each do |payroll| %>
      <tr>
        <td><%= link_to payroll.start_date, payroll %></td>
        <td><%= link_to payroll.end_date, payroll %></td>
        <td><%= link_to 'Edit', edit_payroll_path(payroll) %></td>
        <td><%= link_to 'Destroy', payroll, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Payroll', new_payroll_path %>
